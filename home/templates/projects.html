<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="My Personal Website">
    <meta name="author" content="Luke Zhu">
    <link rel="icon" href="">
    <title>Projects</title>
    <!-- Bootstrap core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <!-- Personal stylesheet -->
    {% load staticfiles %}
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <!-- D3.js style-->
    <style>
    .bar {
        fill: purple;
    }
    
    .bar:hover {
        fill: blue;
    }
    
    .axis path,
    .axis line {
        fill: none;
        stroke: black;
        shape-rendering: crispEdges;
    }
    </style>
    <!-- Font Awesome -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
</head>

<body>
    <div class="projects-top">
        <!-- Static navbar -->
        <nav class="navbar navbar-clear">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">Luke Zhu</a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="{% url 'home' %}">Home</a></li>
                        <li><a href="{% url 'resume' %}">Resume</a></li>
                        <li><a href="{% url 'projects' %}">Projects</a></li>
                    </ul>
                </div>
                <!--/.nav-collapse -->
            </div>
            <!--/.container-->
        </nav>
        <div class="jumbotron jumbotron-clear" style="text-align: center;">
            <h1>Projects</h1>
        </div>
    </div>
    <div class="container">
        <div class="jumbotron" style="background-color: gray; color: white;">
            <h3>Below are some findings from my first few projects.</h3>
        </div>
    </div>
    <div class="container">
        <h1>Technologies Used by Top Startups</h1>
        <p>Many companies post their tech stacks on AngelList. I wanted to see which techs top startups tended to use. Most results like the popularity of Javascript and Amazon S3 were as expected. However, there were also a few interesting findings. These companies used Java(6), PHP(2), and C++(1) less than expected. 7 companies listed CoffeeScript and 4 listed golang in their stacks.
            <p>
                <p>These trends seem to make sense, as languages such as Python, Ruby, and Javascript are in many ways better suited for the fast pace of startups. However, it is important to note that this data has many flaws. For example, most companies listed their main programming languages but not the version control software they use. Also, the current data comes from companies listed on
                    <a href="https://breakoutlist.com">The Breakout List</a> and is subject to the bias of the creator of that list.
                </p>
                <p>In the future, I will try to add data from more companies and make the graph interactive. Please send me a message if you have any questions or would like me to do these changes sooner.</p>
    </div>
    <!-- D3.js -->
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <!-- script src="{% static 'd3/angel.js' %}"></script> -->
    <script>
    d3.select("#bar").attr("align", "center");

    let margin = {
        top: 20,
        right: 20,
        bottom: 30,
        left: 250
    };
    let width = 1000 - margin.left - margin.right;
    let height = 1000 - margin.top - margin.bottom;

    // Scales
    let x = d3.scale.linear()
        .range([0, width]);

    let y = d3.scale.ordinal()
        .rangeRoundBands([0, height], .1);

    // Axis
    let xAxis = d3.svg.axis()
        .scale(x)
        .orient("top")
        .ticks(20);

    let yAxis = d3.svg.axis()
        .scale(y)
        .orient("left");

    // Create SVG element w/ margins and move it to the right
    let svg = d3.select('body')
        .append('svg')
        .attr('width', width + margin.left + margin.right)
        .attr('height', height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



    d3.json("/static/data/angel.json", function(data) {
        // console.log(data);
        let all_data = [];
        for (let group in data) {
            for (let cat in data[group]) {
                for (let tech in data[group][cat]) {
                    let obj = {
                        'name': tech,
                        'count': data[group][cat][tech]
                    }
                    all_data.push(obj);
                }
            }
        }

        all_data.sort(function(a, b) {
            return b.count - a.count;
        });
        top_all_data = all_data.slice(0, 41);

        // Get domains
        x.domain([0, d3.max(top_all_data, function(d) {
            return d.count;
        })]);
        y.domain(top_all_data.map(function(d) {
            return d.name;
        }));

        // Create x and y axes
        svg.append('g')
            .attr('class', 'x axis')
            .call(xAxis);

        svg.append('g')
            .attr('class', 'y axis')
            .call(yAxis);

        svg.selectAll('.bar')
            .data(top_all_data)
            .enter()
            .append("rect")
            .attr("class", "bar")
            .attr("x", 0)
            .attr("width", function(d) {
                return x(d.count);
            })
            .attr("y", function(d) {
                return y(d.name);
            })
            .attr("height", y.rangeBand());
    });
    </script>
</body>
<!-- Bootstrap core JavaScript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>

</html>
